/**

W25Q128 的最小编程（写入）单位是 ​页（Page）​，每页固定为 ​256 字节。

存储架构分层：块（64KB）→ 扇区（4KB）→ 页（256字节）。
​单次写入操作​（通过页编程指令 0x02）最多只能写入 ​1 页（256 字节）​​ 的数据

W25Q128 的最小擦除单位为 ​扇区（4KB）​，擦除后数据全为 0xFF
地址必须按 ​4KB 对齐​（如 0x0000, 0x1000）。
擦除前需写使能​（0x06），否则操作无效

| **指令码** | **指令名称**   | **功能说明**                                                                 | **关键约束**                          | **参考** |
|------------|----------------|-----------------------------------------------------------------------------|---------------------------------------|----------|
| `0x06`     | 写使能         | 使能擦除/编程操作，**必须**在执行写入、擦除前发送                              | 有效时间约 50ms，超时需重新发送        |  |
| `0x04`     | 写禁止         | 禁止后续擦除/编程操作                                                        | 用于意外中断时保护数据                 |      |
| `0x03`     | 读数据         | 从指定地址连续读取数据，支持跨页读取                                          | 单次读取长度无硬性限制                 |  |
| `0x0B`     | 快速读         | 高速读取模式（时钟频率可达 104MHz）                                           | 需在指令后插入 1 字节 dummy clock      |      |
| `0x02`     | 页编程         | 向指定地址写入 ≤256 字节数据                                                 | **禁止跨页写入**，否则数据回卷错乱     |  |
| `0x20`     | 扇区擦除       | 擦除 4KB 扇区（最小擦除单位）                                                | 地址需 4KB 对齐，耗时 400–600ms       |  |
| `0xD8`     | 块擦除（64KB） | 擦除整块（64KB）                                                             | 地址需 64KB 对齐                      |      |
| `0xC7`     | 整片擦除       | 擦除全部存储空间                                                             | 仅用于出厂初始化，慎用！               |      |

W25Q128 的存储空间采用分层管理，具体划分如下：

​块（Block）​​

数量：​256 个​
每块容量：​64KB​
总容量：256 × 64KB = ​16MB​


​扇区（Sector）​​

每块包含 ​16 个扇区​ → 总扇区数：256 × 16 = ​4096 个​
每扇区容量：​4KB​（最小擦除单位）。


​页（Page）​​

每扇区包含 ​16 个页​ → 总页数：4096 × 16 = ​65,536 个​
每页容量：​256 字节​（最大写入单位）。



⚠️ ​关键约束​

​擦除操作​：最小擦除单位为 ​扇区（4KB）​，不支持按页擦除。
​写入操作​：单次写入不能跨页（≤256 字节），否则数据会回卷覆盖

 */
#ifndef __W25X_DATA_DEF_H__
#define __W25X_DATA_DEF_H__

#define  FLASH_WriteAddress     0x00000
#define  FLASH_ReadAddress      FLASH_WriteAddress
#define  FLASH_SectorToErase    FLASH_WriteAddress

#define SPI_FLASH_PageSize      256
#define SPI_FLASH_PerWritePageSize      256

#define W25X_PageProgram		      0x02
#define W25X_ReadData			        0x03
#define W25X_ReadStatusReg		    0x05
#define W25X_WriteEnable		      0x06
#define W25X_SectorErase		      0x20
#define W25X_ChipErase			      0xC7

#define WIP_Flag                  0x01  /* Write In Progress (WIP) flag */
#define Dummy_Byte                0xFF

#endif
